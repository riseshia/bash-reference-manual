### 3.5.2 Tilde Expansion

단어가 따옴표로 감싸지 않은 물결줄표 문자('~'), 따옴표로 감싸지 않은 첫번째 슬래시까지의 모든 문자(또는 해당하는 슬래시가 없다면 모든 문자)는 접두 물결줄표어(*tilde-prefix*)로 간주됩니다. 접두 물결줄표어에 따옴표로 감싼 문자가 없다면, 접두 물결줄표어의 물결줄표 뒤에 오는 문자는 로그인 가능한 이름으로 취급됩니다. 이 로그인 이름이 널 문자열이면 물결줄표는 `HOME` 셸 변수의 값으로 대체됩니다. `HOME`이 설정되어 있지 않으면 셸을 실행하는 사용자의 홈 디렉터리를 사용합니다. 그렇지 않으면 접두 물결줄표어는 식별된 로그인 이름에 대응하는 홈 디렉터리로 전개됩니다.

만약 접두 물결줄표어가 '~+'라면, `PWD` 셸 변수의 값이 접두 물결줄표어를 대체합니다. 접두 물결줄표어가 '~-'이고, 셸 변수 `OLDPWD`가 설정되어 있다면, 그 값으로 대체됩니다.

접두 물결줄표어에서 물결줄표 뒤의 문자가 숫자 N인 경우, 접두 물결줄표어는 그에 대응하는 디렉터리 스택의 요소로 대체됩니다. 이 표기법에서는 숫자 앞에 '+'나 '-'를 사용할 수 있습니다. 이는 `dirs` 빌트인 명령어를 접두 물결줄표의 물결줄표 이후의 문자열을 인수로 호출하는 경우 출력하는 값과 같습니다(The Directory Stack 참조). 접두 물결줄표어가 물결줄표를 제외하고, 앞에 '+'나 '-'가 없이 숫자만 오는 경우, '+'와 함께 호출한 것으로 간주합니다.

로그인 이름이 유효하지 않거나 물결줄표 전개가 실패하면 단어는 변경되지 않습니다.

각 변수 대입은 첫 '='나 ':'뒤에 오는 따옴표로 감싸지 않은 접두 물결줄표어의 존재를 확인합니다. 만약 존재한다면 물결줄표 전개가 실행됩니다. 따라서, `PATH`, `MAILPATH`, `CDPATH`에 물결줄표를 포함하는 파일명을 대입을 요구하는 경우, 셸은 전개된 값을 대입합니다.

다음 표는 Bash가 따옴표로 감싸지 않은 접두 물결줄표어를 어떻게 다루는지 보여줍니다.

- `~`
  `$HOME`의 값
- `~/foo`
  `$HOME/foo`
- `~fred/foo`
  유저 `fred`의 홈 디렉터리의 하위 디렉토리인 `foo`
- `~+/foo`
  `$PWD/foo`
- `~-/foo`
  `${OLDPWD-'~-'}/foo`
- `~N`
  '`dirs +N`'를 실행해서 출력된 문자열
- `~+N`
  '`dirs +N`'를 실행해서 출력된 문자열
- `~-N`
   '`dirs -N`'를 실행해서 출력된 문자열

또한 Bash는 변수 대입 조건을 충족하는 단어가 간단한 명령어의 인수로 등장하는 경우에도 물결줄표 전개를 실행합니다([Shell Parameters](chapter_3_4.html)를 참조). POSIX 모드로 실행되는 Bash에서는 위에서 나열한 선언 명령을 제외하면 물결줄표 전개를 적용하지 않습니다.
