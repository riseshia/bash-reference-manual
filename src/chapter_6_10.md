## 6.10 The Restricted Shell
Bash가 `rbash`라는 이름으로 실행되거나 호출시에 `--restricted`나 `-r` 옵션이 넘겨졌다면 셸은 한정 모드가 됩니다. 한정 모드의 셸은 표준 셸보다 환경을 좀 더 제어하고 싶을 때 사용합니다. 한정 모드의 셸은 다음의 동작을 금지하거나 실행되지 않는다는 점을 제외하면 `bash`와 동일하게 동작합니다.

- `cd` 빌트인 명령어로 디렉터리를 변경하기.
- `SHELL`, `PATH`, `HISTFILE`, `ENV`, `BASH_ENV` 변수의 값을 설정하거나 제거하기.
- 슬래시를 포함하는 명령어 이름을 지정하기.
- `.` 빌트인 명령어의 인수로 슬래시를 포함하는 파일명을 지정하기.
- `history` 빌트인 명령어의 인수로 슬래시를 포함하는 파일명을 지정하기.
- `hash` 빌트인 명령어의 `-p` 옵션의 인수로 슬래시를 포함하는 파일명을 지정하기.
- 기동 중에 셸 환경으로부터 함수 정의를 가져오기.
- 기동 중에 셸 환경으로부터 `SHELLOPTS`의 값을 구문 분석하기.
- 리다이렉션 연산자 '>', '>|', '<>', '>&', '&>', '>>'를 사용하여 출력을 리다이렉팅하기.
- `exec` 빌트인 명령어를 사용해서 셸을 다른 명령어로 대체하기.
- `enable` 빌트인 명령어의 `-f`, `-d` 옵션을 사용해서 빌트인 명령어를 추가하거나 제거하기.
- `enable` 빌트인 명령어로 셸 빌트인을 유효화하거나 무효화하기.
- `command` 빌트인 명령어에 `-p` 옵션 지정하기.
- 'set +r'이나 'set +o restricted'로 한정 모드를 끄기.

이 제약들은 기동 파일을 읽은 후부터 적용됩니다.

셸 스크립트([Shell Scripts](chapter_3_8.html)를 참조)라고 판명된 명령어가 실행되면, `rbash`는 스크립트를 실행하기 위해서 생성된 셸에서는 제약을 전부 무효화합니다.

셸의 한정 모드는 유용한 한정된 환경의 구성요소중 하나에 불과합니다. 이는 `PATH`를 몇몇 검증된 명령어(셸 이스케이프를 허용하는 명령어는 매우 위험합니다)만 실행할 수 있는 값으로 설정하기, 로그인 후에 홈 디렉터리 이외의 쓰기 불가로 만들기, 한정 모드에서 셸 스크립트 실행을 금지하기, 몇몇 명령어의 동작을 변경하는 변수(e.g. `VISUAL`, `PAGER`)의 환경을 청소하는 것을 포함합니다.

현대적인 시스템은 `jails`, `zones`, `containers`와 같은 한정된 환경을 구현하는 좀 더 안전한 방식을 제공합니다.
