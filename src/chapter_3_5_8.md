### 3.5.8 Filename Expansion

`-f` 옵션([The Set Builtin](chapter_4_3_1.html)을 참조)이 켜져있지 않다면, Bash는 단어 분리 후 각 단어에서 '*', '?', '\['를 찾습니다. 이들이 하나라도 존재하고, 따옴표로 감싸져있지 않다면, 단어는 `pattern`으로 간주되며, 패턴([Pattern Matching](chapter_3_5_8.html#3581-pattern-matching)을 참조)에 일치하는 알파벳순으로 정렬된 파일명로 대체됩니다. 만약 `nullglob` 셸옵션이 꺼져있는 상황에서 일치하는 파일명을 찾지 못했다면 단어는 대체되지 않고 유지됩니다. 만약 `nullglob` 옵션이 켜져있다면 일치하는 파일명을 찾지 못할 경우, 단어를 삭제합니다. `failglob` 셸옵션이 켜져있고, 일치하는 파일명을 찾지 못했을 경우, 에러 메시지를 출력하고 명령어는 실행되지 않습니다. 만약 `nocaseglob` 셸옵션이 켜져있을 경우, 대소문자를 구분하지 않고 일치여부를 검사합니다.

파일명 전개를 위해 패턴이 사용될 때, 셸옵션 `dotglob`이 켜져있지 않다면 파일명 처음이나 슬래시 뒤의 '.' 문자는 반드시 명시적으로 일치해야합니다. 파일명 '.'나 '..'는 `dotglob` 옵션이 켜져있다고 하더라도 언제나 명시적으로 일치해야합니다. 그렇지 않은 경우, '.' 문자는 특별하게 취급되지 않습니다.

파일명 일치검사를 할 때, 슬래시는 언제나 명시적으로 슬래시를 통해 일치해야 합니다. 그 이외의 경우에는 나중에 설명할 특수 패턴 문자([Pattern Matching](chapter_3_5_8.html#3581-pattern-matching)을 참조)를 통해 일치시킬 수 있습니다.

`nocaseglob`, `nullglob`, `failglob`, `dotglob`에 대해서는 [The Shopt Builtin](chapter_4_3_2.html)의 `shopt` 설명을 참조하세요.

`GLOBIGNORE` 셸변수는 파일명의 패턴 일치 집합을 제한할 때 사용합니다. 만약 `GLOBIGNORE`가 설정되어 있다면, `GLOBIGNORE`에 존재하는 패턴과도 일치하는 파일명은 일치한 목록에서 제거됩니다. 만약 `nocaseglob` 옵션이 켜져있다면, `GLOBIGNORE`의 패턴과 일치 검사를 할 때 대소문자를 구분하지 않습니다. `GLOBIGNORE`가 설정되어있고, 널이 아니라면 파일명 '.'와 '..'는 언제나 무시됩니다. 그러나 `GLOBIGNORE`를 널이 아닌 값으로 설정하면 `dotglob` 셸 옵션이 켜집니다. 그러므로 `.`으로 시작하는 모든 파일명과 일치하게 됩니다. '.'로 시작하는 모든 파일명을 무시하는 이전 동작으로 돌아가려면 '.*'를 `GLOBIGNORE`의 패턴에 추가하세요. `GLOBIGNORE`가 설정되어있지 않다면, `dotglob` 옵션은 꺼집니다.

#### 3.5.8.1 Pattern Matching

아래에서 설명할 특수 패턴 문자를 제외한 패턴에 나타나는 모든 문자는 자기 자신과 일치합니다. NUL 문자는 패턴에서 사용할 수 없습니다. 백슬래시는 뒤에 오는 문자를 이스케이프합니다. 이스케이프용 백슬래시는 일치 검사시에 제거됩니다. 특수 패턴 문자는 그 자체로 일치시키고 싶을 경우, 반드시 따옴표로 감싸야합니다.

특수 패턴 문자는 다음과 같은 의미를 가지고 있습니다.

- **\***

  널을 포함한 모든 문자열에 일치합니다. `globstar` 셸옵션이 켜진 상태에서 파일명 전개에서 '*'를 사용하면, 두 개의 인접한 '*'가 하나의 패턴이 되며, 이는 모든 파일과 일치하거나 0개 이상의 디렉터리, 하위 디렉터리와 일치합니다. 두 개의 인접한 '*' 뒤에 '/'를 사용하는 경우 디렉터리나 하위 디렉터리만 일치합니다.
- **?**

  임의의 한 문자와 일치합니다.
- **\[…]**

  대괄호로 감싼 문자들 중 하나와 일치합니다. 하이픈으로 구분된 한 쌍의 문자는 범위 표현식입니다. 현재의 로케일의 문자셋의 순서를 이용하여, 표현식에 사용된 문자들을 포함한 범위에 들어있는 임의의 문자와 일치합니다. 만약 '\[' 뒤에 오는 첫번째 문자가 '!'나 '^'인 경우, 대괄호에 들어있지 않은 문자와 일치합니다. '-'는 처음이나 마지막에 나타날 경우, 자기 자신과 일치합니다. ']'는 집합의 첫번째 문자로 포함하여 일치시킬 수 있습니다. 범위 표현식의 문자들의 정렬 순서는 현재 로케일, 설정 되어 있다면 `LC_COLLATE`와 `LC_ALL` 셸 변수에 의해 결정됩니다.

  예를 들어 기본 C 로케일에서 '[a-dx-z]'는 '[abcdxyz]'와 동일합니다. 많은 로케일에서는 사전순으로 문자를 정렬하며, 이러한 로케일에서 '[a-dx-z]'는 일반적으로 '[abcdxyz]'와 동일하지 않으며, 실제로는 '[aBbCcDdxXyYz]'와 동일합니다. 전형적인 대괄호 표현식의 범위 표현 방식을 사용하고 싶다면, `LC_COLLATE`나 `LC_ALL` 환경 변수를 'C'로 지정하여 C 로케일을 사용하거나 `globasciiranges` 셸옵션을 켜야 합니다.

  '\['와 ']' 사이의 *character class*는 \[:*class*:] 문법을 통해서 지정할 수 있습니다. *class*는 POSIX 표준에서 정의된 다음 클래스를 따릅니다.
  ```
  alnum   alpha   ascii   blank   cntrl   digit   graph   lower
  print   punct   space   upper   word    xdigit
  ```
  문자 클래스는 해당 클래스에 속하는 임의의 문자와 일치합니다. `word` 문자 클래스는 영문자, 숫자, '_'와 일치합니다.

  '\['와 ']' 사이의 *equivalence class*는 \[=*c*=] 문법으로 지정할 수 있습니다. 이는 문자 *c*와 (현재 로케일에서 정의된) 동일한 정렬순을 가지는 모든 문자들과 일치합니다.

  '\['와 ']' 사이의 \[.*symbol*.] 문법은 정렬 기호 *symbol*과 일치합니다.

`shopt` 빌트인에서 `extglob` 셸옵션을 켰다면, 몇몇 확장 패턴 일치 연산자를 사용할 수 있습니다. 다음 설명에서 *pattern-list*는 '|'로 구분된 하나 이상의 패턴 리스트입니다. 다음의 패턴을 하나 이상 결합하여 복합 패턴을 만들 수 있습니다.
- **\?(*pattern-list*)**

  주어진 패턴들이 없거나 한 번 출현하면 일치합니다.
- **\*(*pattern-list*)**

  주어진 패턴들이 0개 이상 출현하면 일치합니다.
- **\+(*pattern-list*)**

  주어진 패턴들이 1개 이상 출현하면 일치합니다.
- **\@(*pattern-list*)**

  주어진 패턴 중 하나와 일치합니다.
- **\!(*pattern-list*)**

  주어진 패턴 모두가 출현하지 않는 경우 일치합니다.

긴 문자열에서의 복잡한 확장 패턴 일치는 느리며, '|'를 여럿 포함하고 있거나, 문자열이 여러개의 패턴 일치를 포함하는 경우 특히 그렇습니다. 짧은 문자열에 대해서 각각 일치 검사를 수행하거나, 하나의 긴 문자열 대신 문자열의 배열을 사용하여 빠르게 만들 수 있습니다.