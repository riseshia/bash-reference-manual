### 4.3.1 The Set Builtin
이 빌트인은 복잡하기 때문에 하나의 섹션을 전부 사용할만 합니다. `set`은 셸 옵션의 값을 변경하거나 위치 매개변수를 설정하거나 셸 변수의 이름과 값을 출력할 수 있습니다.

**set**

```sh
set [--abefhkmnptuvxBCEHPT] [-o option-name] [argument …]
set [+abefhkmnptuvxBCEHPT] [+o option-name] [argument …]
```
옵션이나 인수를 넘기지 않는다면, `set`은 모든 셸 변수와 함수의 이름과 값을 현재 로케일의 정렬순에 따라서 설정에 재사용할 수 있는, 또는 현재 설정된 변수 값을 리셋할 수 있는 형식으로 출력합니다. 읽기 전용 변수는 리셋할 수 없습니다. POSIX 모드에서는 셸 변수만 출력됩니다.

옵션을 넘긴다면 그 값이 셸 속성으로 설정되거나 제거됩니다. 각 옵션은 다음의 의미를 가집니다.

- **-a**

  각 변수나 함수를 생성하거나 수정할 때 익스포트 속성을 추가하고 이후의 명령어 환경에 익스포트하도록 표식을 남깁니다.
- **-b**

  실행이 종료된 백그라운드 잡의 스테이터스를 즉시 보고하도록 합니다. 옵션이 없는 경우, 주 프롬프트를 출력하기 직전에 보고됩니다.
- **-e**

  하나의 단순 명령어([Simple Commands](chapter_3_2_2.html)를 참조), 리스트([Lists of Commands](chapter_3_2_4.html)를 참조), 또는 복합 명령어([Compound Commands](chapter_3_2_5.html)를 참조)로 구성된 파이프라인([Pipelines](chapter_3_2_3.html)를 참조)이 0이 아닌 스테이터스를 반환하면 즉시 종료합니다. 실패한 명령어가 `while`이나 `until` 키워드의 뒤에 오는 명령어 리스트이거나 `if` 식의 테스트의 일부이거나 `&&`나 `||`의 내부에 있다면 명령어를 즉시 종료하지 않습니다. 단 `&&`와 `||`의 가장 마지막에 오는 명령어인 경우, 파이프라인의 가장 마지막 명령어인 경우, 명령어의 종료 스테이터스가 `!`로 반전되는 경우는 예외입니다. 서브셸 이외의 복합 명령어가 `-e`가 무시되는 동안 명령어가 실패해 0이 아닌 스테이터스를 반환했다면 셸은 종료되지 않습니다. `ERR`에 트랩이 설정되어 있다면 셸이 종료되기 전에 실행됩니다.

  이 옵션은 셸 환경과 각 서브셸 환경에 독립적으로 적용되며([Command Execution Environment](chapter_3_7_3.html)를 참조), 이로 인해 서브셸에서 모든 명령어가 실행되기 전에 서브셸을 종료시킬 수도 있습니다.

  복합 명령어나 셸 함수가 `-e`가 무시되는 컨텍스트에서 실행된다면 복합 명령어나 함수 본체 내부에서 실행된 명령어들은 `-e`를 설정하고 명령어가 실패 스테이터스를 반환한다 하더라도 `-e` 설정의 영향을 받지 않습니다. 복합 명령어나 셸 함수가 `-e`를 무시중인 컨텍스트에서 실행중에 `-e`를 설정하더라도 복합 명령어나 함수 호출에 포함된 명령어가 완료될 때까지 이 설정은 효과를 발휘하지 않습니다.
- **-f**

  파일 이름 전개(globbing)를 무효화합니다.
- **-h**

  명령어를 실행하기 위해 검색할 때, 위치를 찾고 이를 기억합니다(`hash`). 기본 설정에서 이 옵션은 켜져 있습니다.
- **-k**

  대입문이 명령어의 앞에 위치하지 않더라도 명령어의 환경에 배치합니다.
- **-m**

  잡 컨트롤을 유효화합니다([Job Control](chapter_7.html)을 참조). 모든 프로세스는 별개의 프로세스 그룹에서 실행됩니다. 백그라운드 잡이 완료되면 셸은 해당 잡의 종료 스테이터스를 포함하는 줄을 출력합니다.
- **-n**

  명령어를 읽지만 실행하지 않습니다. 이는 스크립트의 문법 에러를 검사하기 위해서 사용할 수 있습니다. 인터랙티브 셸은 이 옵션을 무시합니다.
- **-o *option-name***

  *option-name*에 대응하는 옵션을 설정합니다.
  - **allexport**

    `-a`와 같습니다.
  - **braceexpand**

    `-B`와 같습니다.
  - **emacs**

    emacs 스타일의 편집 인터페이스([Command Line Editing](chapter_8.html)을 참조)를 사용합니다. 이는 `read -e`에서 사용하는 편집 인터페이스에도 적용됩니다.
  - **errexit**

    `-e`와 같습니다.
  - **errtrace**

    `-E`와 같습니다.
  - **functrace**

    `-T`와 같습니다.
  - **hashall**

    `-h`와 같습니다.
  - **histexpand**

    `-H`와 같습니다.
  - **history**

    명령어 이력을 유효화합니다. 이 기능은 [Bash History Facilities](chapter_9_1.html)에서 설명합니다. 인터랙티브 셸의 기본 설정에서 이 옵션은 켜져있습니다.
  - **ignoreeof**

    인터랙티브 셸이 EOF를 읽어도 종료하지 않습니다.
  - **keyword**

    `-k`와 같습니다.
  - **monitor**

    `-m`와 같습니다.
  - **noclobber**

    `-C`와 같습니다.
  - **noexec**

    `-n`와 같습니다.
  - **noglob**

    `-f`와 같습니다.
  - **nolog**

    현재는 무시됩니다.
  - **notify**

    `-b`와 같습니다.
  - **nounset**

    `-u`와 같습니다.
  - **onecmd**

    `-t`와 같습니다.
  - **physical**

    `-P`와 같습니다.
  - **pipefail**

    설정하면 파이프라인의 종료값은 0이 아닌 값으로 종료한 가장 마지막(또는 가장 오른쪽) 명령어의 값이나 파이프라인의 모든 명령어가 성공적으로 종료했다면 0입니다. 이 옵션은 기본 설정에서 꺼져 있습니다.
  - **posix**

    POSIX 표준과 다른 Bash의 기본 동작을 표준([Bash POSIX Mode](chapter_6_11.html)를 참조)에 준수하도록 변경합니다. 이는 Bash를 표준의 엄밀한 상위 집합으로 동작시키기 위함입니다.
  - **privileged**

    `-p`와 같습니다.
  - **verbose**

    `-v`와 같습니다.
  - **vi**

    vi 스타일의 편집 인터페이스를 사용합니다. 이는 `read -e`에서 사용하는 편집 인터페이스에도 적용됩니다.
  - **xtrace**

    `-x`와 같습니다.
- **-p**

  특권 모드를 켭니다. 이 모드에서는 `$BASH_ENV`와 `$ENV`를 처리하지 않으며, 셸 함수를 환경으로부터 상속하지 않습니다. 그리고 `SHELLOPTS`, `BASHOPTS`, `CDPATH`, `GLOBIGNORE` 변수가 존재하더라도 무시합니다. 셸이 실제 유저(그룹) id와 다른 유효한 유저(그룹) id로 기동하고 `-p` 옵션을 넘기지 않을 경우, 이 동작은 유효한 유저 id를 실제 유저 id로 설정합니다. 기동시에 `-p` 옵션을 넘기면 유효한 유저 id는 초기화되지 않습니다. 이 옵션을 끄면 유효한 유저와 그룹 id는 실제 유저와 그룹 id가 됩니다.
- **-t**

  명령어 하나를 읽고 실행한 뒤 종료합니다.
- **-u**

  매개변수 전개중에 특수한 매개변수 '@'와 '*'를 제외한 설정되지 않은 변수와 매개변수를 사용하려고 하면 에러가 됩니다. 에러 메시지는 표준 에러에 출력되며 논-인터랙티브 셸이라면 종료합니다.
- **-v**

  셸 입력 줄이 읽은 내용을 출력합니다.
- **-x**

  단순 명령어, `for` 명령어, `case` 명령어, `select` 명령어, 산술 `for` 명령어와 그 인수 또는 연관된 단어 리스트를 전개된 뒤, 실행되기 전에 트레이스를 출력합니다. `PS4` 변수의 값을 전개한 결과를 각 명령어와 전개된 인수 앞에 출력합니다.
- **-B**

  셸이 중괄호 전개([Brace Expansion](chapter_3_5_1.html)을 참조)를 수행합니다. 기본 설정에서 이 옵션은 켜져 있습니다.
- **-C**

  '>', '>&', '<>'를 사용한 출력 리다이렉션이 이미 존재하는 파일을 덮어쓸 수 없도록 합니다.
- **-E**

  설정되어 있다면 `ERR` 트랩은 셸 함수, 명령어 치환, 서브셸에서 실행되는 명령어에 상속됩니다. `ERR` 트랩은 일반적으로 이러한 경우에 상속되지 않습니다.
- **-H**

  '!' 스타일의 이력 치환([History Interaction](chapter_9_3.html)을 참조)을 유효화합니다. 인터랙티브 셸의 기본 설정에서 이 옵션은 켜져있습니다.
- **-P**

  설정되어 있다면, 현재 디렉터리를 변경하는 `cd` 등의 명령어를 실행할 때 심볼릭 링크를 해결하지 않습니다. 그 대신 실제 디렉터리가 사용됩니다. Bash의 기본 설정에서는 현재 디렉터리를 변경하는 명령어를 실행할 때 디렉터리의 가상 연결을 따라갑니다.
  예를 들어, `/usr/sys`가 `/usr/local/sys`를 가리키는 심볼릭 링크라고 가정해봅시다.
  ```sh
  $ cd /usr/sys; echo $PWD
  /usr/sys
  $ cd ..; pwd
  /usr
  ```
  만약 `set -P`가 켜져있다면 다음처럼 동작합니다.
  ```sh
  $ cd /usr/sys; echo $PWD
  /usr/local/sys
  $ cd ..; pwd
  /usr/local
  ```
- **-T**

  설정되어 있다면, `DEBUG`와 `RETURN`의 트랩은 셸 함수, 명령어 치환, 서브셸 환경에서 실행되는 명령어에 계승됩니다. `DEBUG`와 `RETURN` 트랩은 일반적으로 이러한 경우에 계승되지 않습니다.
- **--**

  이 옵션 뒤에 인수가 존재하지 않는다면 위치 매개변수가 제거됩니다. 그렇지 않으면, 몇몇 변수가 '-'로 시작하더라도 위치 매개변수를 *argument*로 설정합니다.
- **-**

  옵션의 끝을 알리며, 나머지 모든 *argument*는 위치 매개변수에 설정됩니다. `-x`와 `-v` 옵션이 꺼집니다. 인수가 없다면, 위치 매개변수는 변경되지 않습니다.

옵션을 끄고 싶은 경우 '-' 대신 '+'를 사용하세요. 이 옵션들은 셸을 호출할 때에도 사용할 수 있습니다. 현재 셸의 옵션은 `$-`에서 확인할 수 있습니다.

나머지 N *argument*는 위치 매개변수가 되며 `$1`, `$2`, ... `$N` 순서로 대입됩니다. 특수 매개변수 `#`에는 N이 설정됩니다.

잘못된 옵션을 넘기지 않는 이상 종료 스테이터스는 언제나 0입니다.
